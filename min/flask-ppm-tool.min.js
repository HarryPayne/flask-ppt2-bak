/*! flask-ppm-tool 13-03-2016 */
!function(){angular.module("PPT",["app.attributes","app.comment","app.common","app.curate","app.filter","app.header","app.login","app.loginInjectorProvider","app.manage","app.modalConfirm","app.project","app.report","app.select","app.stateLocation","app.title","ngSanitize"])}(),function(){"use strict";function a(a){a.otherwise("/select/home")}angular.module("PPT").config(a),a.$inject=["$urlRouterProvider"]}(),function(){"use strict";function a(a,b){}angular.module("PPT").controller("PPTCtrl",a),a.$inject=["$rootScope","$location"]}(),function(){"use strict";function a(a){function b(b,c,d,e,f){window.onbeforeunload=function(b){a.$broadcast("savestate")}}a.$on("$stateChangeStart",b)}angular.module("PPT").run(a),a.$inject=["$rootScope"]}(),function(){angular.module("app.attributes",["ui.router"])}(),function(){"use strict";function a(a,b,c){this.als=c,this.attributes=this.als.getAttributes}angular.module("app.attributes").controller("Attributes",a),a.$inject=["$scope","$state","attributesService"]}(),function(){"use strict";function a(a,b,c,d){function e(a){if("multipleSelect"==a.format||"dateRangeSelect"==a.format)_.isArray(a.value)?this[a.name]=_.map(a.value,function(a){return a.id}):this[a.name]=null==a.value?"":a.value.id,a.child&&(a.child.value&&!_.isArray(a.child.value)?this[a.child.name]=a.child.value.id:this[a.child.name]=a.child.value);else if("date"==a.format){if(a.computed)return;a.value?this[a.name]=new Date(a.value).toString("yyyy-MM-dd"):this[a.name]=null}else if(_.contains(["commentAuthored","commentEdited"],a.name)){if(a.computed)return;a.value?this[a.name]=new Date(a.value).toString("yyyy-MM-ddTHH:mm:ss"):this[a.name]=null}else"child_for_"!=a.format.substring(0,"child_for_".length)&&(this[a.name]=a.value)}function f(a){_.contains(["disposition","comment"],a.table)||e(a)}function g(){_.each(D.allAttributes,function(a){a.hasOwnProperty("errors")&&delete a.errors}),delete D.server_error}function h(a){return D.allAttributes[a]}function i(){return D.allAttributes}function j(b,c){var d=new Object;return d.csrf_token=D.csrf_token,"undefined"!=typeof c&&_.each(c,function(a){"undefined"!=typeof a.value.id?d[a.name]=a.value.id:d[a.name]=a.value}),_.each(D.getProjectAttributes(b),e,d),"comment"==b&&(d.commentEditor=a.currentUser.id),d}function k(){return"undefined"!=typeof D.currentState?(!1 in D.currentState&&(D.currentState.keys=[]),D.currentState.keys):void 0}function l(a){try{return _.sortBy(D.projectAttributes[a],"attributeID")}catch(b){}}function m(a){try{return D.rawAttributes[a]}catch(b){}}function n(a){return a.multi?_.filter(a.choices,function(b){return _.contains(a.value,b.id)}):"lines"==a.format?_.filter(a.choices,function(b){return _.contains(a.value,b)}):_.where(a.choices,{id:a.value})[0]}function o(){return D.server_error}function p(a){var b;return"id"in a?b=a.id:"value"in a&&("number"==typeof a.value?b=a.value:"string"==typeof a.value?b=parseInt(a.value):"id"in a.value&&(b=a.value.id)),b}function q(a){return"undefined"!=typeof a.value&&null!=a.value&&""!=a.value&&a.value!=[]||"undefined"!=typeof a.value&&null!=a.value&&"undefined"!=typeof a.value.id&&null!=a.value.id&&""!=a.value&&a.value!=[]?!0:!1}function r(){return D.csrf_token}function s(a){return"project link here"}function t(a){if("$$hashKey"!=a.name){var b=D.allAttributes[a.name];"undefined"!=typeof b&&("multipleSelect"!=b.format||b.multi||null!=a.value?b.value=a.value:b.value=b.choices[0],a.printValue&&(b.printValue=a.printValue),"child_for_"!=b.format.substring(0,"child_for_".length)&&("date"==b.format&&a.value&&(b.value=new Date(Date.parse(a.value))),D.projectAttributes[this].push(b)))}}function u(){_.each(["description","portfolio","project"],function(a){"undefined"==typeof D.projectAttributes&&(D.projectAttributes=new Object),D.projectAttributes[a]=[],y(a,[])}),D.clearAllErrors()}function v(){var a=angular.fromJson(sessionStorage.attributesService);a&&(D.allAttributes=a.allAttributes,D.currentState=a.currentState)}function w(){var a=new Object;a.allAttributes=D.allAttributes,a.currentState=D.currentState,sessionStorage.attributesService=angular.toJson(a)}function x(a){D.allAttributes=a.data;var b=_.filter(a.data,function(a){return a.child?!0:void 0});_.each(b,function(a){var b=a.child;D.allAttributes[b.name]=b})}function y(a,b){"undefined"==typeof D.currentState&&(D.currentState=new Object),D.currentState.keys=[];var c=m(a),d=c;"undefined"==typeof d&&(d=[]);var e;if(_.each(b,function(a){var b=p(a);d=_.filter(d,function(c){return"undefined"==typeof c[a.name].id&&c[a.name]==b||"undefined"!=typeof c[a.name].id&&c[a.name].id==b?(D.currentState.keys.push(a),!0):void 0})}),d.length){e=d[0];var f=[];_.each(Object.keys(e),function(a){"printValue"!=_.last(a.split("."))&&f.push({name:a,value:e[a]})}),D.projectAttributes[a]=[],_.each(f,t,a);var g=_.filter(D.projectAttributes[a],function(a){return"child"in a?!0:void 0});return _.each(g,function(a){var b=a.child.name;a.child=D.allAttributes[b]}),w(),e}var h=_.where(D.allAttributes,{table:a});"undefined"==typeof D.projectAttributes&&(D.projectAttributes=new Object),D.projectAttributes[a]=[],_.each(h,function(b){if("commentID"==b.name)b.value=0;else{if(b.computed)return;_.contains(["multipleSelect","dateRangeSelect"],b.format)?b.value=[]:b.value=""}D.projectAttributes[a].push(b)}),w()}function z(){var a=c.defer();return b.get("/getAllAttributes").then(function(b){D.setAllAttributes(b),a.resolve()}),a.promise}function A(a){if(400==a.status&&"Token is expired"==a.data.description?D.server_error="Your session has expired. Please log out and login again.":200!=a.status&&(D.server_error=a.statusText),"undefined"!=typeof a.data.errors){var b=a.data.errors;_.each(Object.keys(b),function(a){var c=D.getAttribute(a);c.errors=b[a]})}}function B(a,b){D.currentState=new Object,D.currentState.keys=[],D.currentState.projectID=a.data.projectID,D.csrf_token=a.data.csrf_token,D.errors=a.data.errors,D.clearAllErrors(),delete D.success,D.updateErrors(a),"OK"==a.statusText&&_.each(a.data.formData,C),"undefined"!=typeof b&&("disposedInFY"in b||"disposedInQ"in b)?y("disposition",[{name:"disposedInFY",value:{id:b.disposedInFY}},{name:"disposedInQ",value:{id:b.disposedInQ}}]):"undefined"!=typeof b&&"commentID"in b&&y("comment",[{name:"commentID",value:{id:b.commentID}}])}function C(a){var b=new Object;b.tableName=a.tableName,_.isArray(a.attributes[0].attributes)?("undefined"==typeof D.rawAttributes&&(D.rawAttributes=new Object),D.rawAttributes[b.tableName]=[],_.each(a.attributes,function(a){if(a.attributes.length){var c=new Object;_.each(a.attributes,function(a){c[a.name]=a.value,"undefined"!=typeof a.printValue&&(c[a.name+".printValue"]=a.printValue)}),D.rawAttributes[b.tableName].push(c)}})):("undefined"==typeof D.projectAttributes&&(D.projectAttributes=new Object),D.projectAttributes[b.tableName]=[],_.each(a.attributes,t,b.tableName))}var D={addAttrToDataObj:e,addUniqueAttrToDataObj:f,clearAllErrors:g,getAttribute:h,getAllAttributes:i,getFormData:j,getKeys:k,getProjectAttributes:l,getRawAttributes:m,getSelectedChoices:n,getServerError:o,getToken:r,hasAValue:q,makeProjectLink:s,mergeAttributeWithValue:t,newProjectAttributes:u,RestoreState:v,SaveState:w,setAllAttributes:x,updateProjAttrsFromRawItem:y,updateAllAttributes:z,updateErrors:A,updateProjectAttributes:B,updateProjectAttributesFromForm:C};return D.RestoreState(),"undefined"==typeof D.allAttributes&&D.updateAllAttributes(),a.$on("savestate",D.SaveState),a.$on("restorestate",D.RestoreState),D}angular.module("app.attributes").factory("attributesService",a),a.$inject=["$rootScope","$http","$q","projectListService"]}(),function(){angular.module("app.comment",["ui.router"])}(),function(){"use strict";function a(a){a.state("comment",{url:"/comment",templateUrl:"/static/comment/comment.html",controller:"Comment",controllerAs:"comment",data:{requiresLogin:!0}})}angular.module("app.comment").config(a),a.$inject=["$stateProvider"]}(),function(){"use strict";function a(a,b){this.currentUser=b.currentUser}angular.module("app.comment").controller("Comment",a),a.$inject=["$scope","$rootScope"]}(),function(){angular.module("app.common",[])}(),function(){"use strict";function a(){function a(){this.option,this.jump=b}function b(){this.ctrl.onSubmit()(this.ctrl.option.projectID)}return{restrict:"EA",scope:{help:"=",label:"=",onSubmit:"&",options:"="},controller:a,controllerAs:"ctrl",bindToController:!0,templateUrl:"static/common/jumpToProjectChoice/jumpToProjectChoice.html",link:function(a,b,c,d){a.submit=d.jump}}}angular.module("app.common").directive("jumpToProjectChoice",a)}(),function(){"use strict";function a(){function a(){this.projectID,this.jump=b}function b(){this.ctrl.onSubmit()(this.ctrl.projectID)}return{restrict:"EA",scope:{label:"=",help:"=",onSubmit:"&"},controller:a,controllerAs:"ctrl",bindToController:!0,templateUrl:"static/common/jumpToProjectID/jumpToProjectID.html",link:function(a,b,c,d){a.submit=d.jump}}}angular.module("app.common").directive("jumpToProjectId",a)}(),function(){"use strict";function a(){function a(){this.cancel=b,this.details=c,this.detailsObj=d,this.hasAValue=h,this.hasCancel=i,this.hideDetails=j,this.isSelected=k,this.save=l,this.saveDetails=m,this.showDetails=n}function b(){this.onCancelClick()()}function c(){if("undefined"==typeof this.attributes||0==this.attributes.length){var a=[];_.each(this.detailDatasource(),function(b){b.computed||"child_for_"!=b.format.substring(0,"child_for_".length)&&"commentID"!=b.name&&a.push(b)}),this.attributes=a}return this.attributes}function d(a){if("undefined"==typeof this.attributesObj||0==Object.keys(this.attributesObj).length){var b=new Object;_.each(this.detailDatasource(),function(a){b[a.name]=a}),this.attributesObj=b}return a in this.attributesObj?this.attributesObj[a]:void 0}function e(a){var b=["'description'","'portfolio'","'project'"];return _.contains(b,a)?"one":"'comment'"==a?"comments":"'disposition'"==a?"dispositions":void 0}function f(a,b){var c=e(b.table);return"one"==c?"static/common/projectDataDisplay/oneToOneDataModel.html":"comments"==c?"static/common/projectDataDisplay/commentsDataModel.html":"dispositions"==c?"static/common/projectDataDisplay/dispositionsDataModel.html":void 0}function g(a){var b;return"id"in a?b=a.id:"value"in a&&("number"==typeof a.value?b=a.value:"string"==typeof a.value?b=parseInt(a.value):"id"in a.value&&(b=a.value.id)),b}function h(a){if("value"in a)if("string"==typeof a.value){if(""!=a.value)return!0}else{if("object"==typeof a.value&&Boolean(a.value)&&"id"in a.value){if(_.isArray(a.value)){if(a.value.length)return!0}else if(Boolean(a.value.desc)&&null!=a.value.id&&""!=a.value&&a.value!=[])return!0;return!1}if(null!=a.value&&""!=a.value&&a.value!=[])return!0}return!1}function i(){return"undefined"!=typeof this.onCancelClick()}function j(a,b){this.hide()(a,b)}function k(a){if("undefined"==typeof a||"undefined"==typeof this.keys||0==this.keys.length)return!1;var b=!1;return _.each(this.keys,function(c){var d=g(c);b="undefined"==typeof a[c.name].id&&a[c.name]==d||"undefined"!=typeof a[c.name].id&&a[c.name].id==d?!0:!1}),b}function l(a,b){this.onSaveClick()(a,b)}function m(a,b){this.onSaveClick()(a,b)}function n(a,b){this.show()(a,b)}return{restrict:"EA",scope:{datasource:"&",detailDatasource:"&",detailIsSelected:"&",error:"=",header:"=",hide:"&",keys:"=",mode:"=",onCancelClick:"&",onSaveClick:"&",show:"&",showSuccess:"&",success:"=",table:"="},controller:a,controllerAs:"ctrl",bindToController:!0,link:function(a,b,c,d){a.submit=d.save},templateUrl:f}}angular.module("app.common").directive("projectDataDisplay",a)}(),function(){"use strict";function a(){function a(){}return{controller:a,controllerAs:"detailCtrl",restrict:"EA",templateUrl:"static/common/projectDataFormatDirectives/projectDataCommentDetail.html",link:function(a,b,c,d){console.log("")}}}angular.module("app.common").directive("projectDataCommentDetail",a)}(),function(){"use strict";function a(){return{restrict:"EA",templateUrl:"static/common/projectDataFormatDirectives/projectDataComment.html"}}angular.module("app.common").directive("projectDataComment",a)}(),function(){"use strict";function a(){return{restrict:"EA",templateUrl:"static/common/projectDataFormatDirectives/projectDataDate.html"}}angular.module("app.common").directive("projectDataDate",a)}(),function(){"use strict";function a(){return{restrict:"EA",templateUrl:"static/common/projectDataFormatDirectives/projectDataDateRangeSelect.html"}}angular.module("app.common").directive("projectDataDateRangeSelect",a)}(),function(){"use strict";function a(){return{restrict:"EA",templateUrl:"static/common/projectDataFormatDirectives/projectDataDispositionDetail.html"}}angular.module("app.common").directive("projectDataDispositionDetail",a)}(),function(){"use strict";function a(){return{restrict:"EA",templateUrl:"static/common/projectDataFormatDirectives/projectDataDisposition.html"}}angular.module("app.common").directive("projectDataDisposition",a)}(),function(){"use strict";function a(){return{restrict:"EA",templateUrl:"static/common/projectDataFormatDirectives/projectDataMultipleSelect.html"}}angular.module("app.common").directive("projectDataMultipleSelect",a)}(),function(){"use strict";function a(){return{restrict:"EA",templateUrl:"static/common/projectDataFormatDirectives/projectDataNumber.html"}}angular.module("app.common").directive("projectDataNumber",a)}(),function(){"use strict";function a(){return{restrict:"EA",templateUrl:"static/common/projectDataFormatDirectives/projectDataString.html"}}angular.module("app.common").directive("projectDataString",a)}(),function(){"use strict";function a(){return{restrict:"EA",templateUrl:"static/common/projectDataFormatDirectives/projectDataTextArea.html"}}angular.module("app.common").directive("projectDataTextArea",a)}(),function(){angular.module("app.curate",["ui.router"])}(),function(){"use strict";function a(a){a.state("curate",{url:"/curate",templateUrl:"/static/curate/curate.html",controller:"Curate",controllerAs:"curate",data:{requiresLogin:!0}})}angular.module("app.curate").config(a),a.$inject=["$stateProvider"]}(),function(){"use strict";function a(a,b){this.currentUser=b.currentUser}angular.module("app.curate").controller("Curate",a),a.$inject=["$scope","$rootScope"]}(),function(){angular.module("app.filter",[])}(),function(){"use strict";function a(a,b,c){var d={};return $rootScope.$on("savestate",d.SaveState),$rootScope.$on("restorestate",d.RestoreState),d}angular.module("app.filter").factory("FilterBuilderService",a),a.$inject=["projectListService","reportTableService","stateLocationService"]}(),function(){"use strict";function a(a){a.state("filter",{url:"/filter",controller:"Filter",controllerAs:"filter",templateUrl:"/static/filter/filter.html",data:{requiresLogin:!1}}).state("filter.builder",{url:"/builder/:query_string",templateUrl:"/static/filter/templates/builder.html",resolve:{query_string:["$stateParams",function(a){return a.query_string}]},onEnter:["reportTableService",function(a){a.initService()}]}).state("filter.builder.attributes",{url:"/attributes/:attribute_list",templateUrl:"/static/filter/templates/attributes.html",controller:["$stateParams","query_string",function(a,b){a.query_string=b,console.log(a,b)}]})}angular.module("app.filter").config(a),a.$inject=["$stateProvider"]}(),function(){"use strict";function a(a,b){this.ls=a,this.masterList=a.getMasterList,this.jumpToProject=this.ls.jumpToProject,this.selectState=b}angular.module("app.filter").controller("Filter",a),a.$inject=["projectListService","selectStateService"]}(),function(){angular.module("app.header",["ui.router"])}(),function(){"use strict";function a(a,b,c,d){function e(){g.masterList().next>-1&&c.jumpToProject(g.masterList().next)}function f(){g.masterList().previous>-1&&c.jumpToProject(g.masterList().previous)}var g=this;this.currentUser=a.currentUser,this.masterList=c.getMasterList,this.getSql=c.getSql,this.getNextID=c.getNextID,this.getPreviousID=c.getPreviousID,this.getProjectID=c.getProjectID,this.hasNextID=c.hasNextID,this.hasPreviousID=c.hasPreviousID,this.loggedIn=d.loggedIn,this.login=d.login,this.logout=d.logout,this.jumpToNextProject=e,this.jumpToPreviousProject=f,a.$on("$stateChangeSuccess",function(a,b){function c(a){return b.name.split(".")[0]===a}function d(){return g.isActive("project")&&g.masterList().next>-1}function e(){return g.isActive("project")&&g.masterList().previous>-1}g.isActive=c,g.hasNext=d,g.hasPrevious=e})}angular.module("app.header").controller("Header",a),a.$inject=["$rootScope","$state","projectListService","loginStateService"]}(),function(){angular.module("app.login",["ui.bootstrap","angular-storage","angular-jwt"])}(),function(){"use strict";function a(a){function b(b,c){return a({url:"/auth",method:"POST",data:{username:b,password:c}})}var c={login:b};return c}angular.module("app.login").factory("loginApiService",a),a.$inject=["$http"]}(),function(){"use strict";function a(a,b){a.tokenGetter=function(a){return a.get("jwt")},b.interceptors.push("jwtInterceptor"),b.interceptors.push("loginInjector")}angular.module("app.login").config(a),a.$inject=["jwtInterceptorProvider","$httpProvider"]}(),function(){"use strict";function a(a,b){function c(c,d){b.login(c,d).then(function(b){a.$close(b)})}this.cancel=a.$dismiss,this.submit=c}angular.module("app.login").controller("Login",a),a.$inject=["$scope","loginApiService"]}(),function(){"use strict";function a(a,b,c,d,e){function f(a,f,g,h,i){var j=f.data&&f.data.requiresLogin,k=!c.get("jwt")||d.isTokenExpired(c.get("jwt"));j&&k&&(a.preventDefault(),e().then(function(){return b.go(f.name,g)},function(){return""==h.name?b.go("select.home"):void 0}))}b.transitionTo("select"),c.get("jwt")&&!d.isTokenExpired(c.get("jwt"))&&(a.currentUser=d.decodeToken(c.get("jwt"))),a.$on("$stateChangeStart",f)}angular.module("app.login").run(a),a.$inject=["$rootScope","$state","store","jwtHelper","loginService"]}(),function(){"use strict";function a(a,b,c,d){function e(){var b=a.open({templateUrl:"static/login/login.html",controller:"Login",controllerAs:"login"});return b.result.then(f)}function f(a){if(200==a.status){c.set("jwt",a.data.token);var e=d.decodeToken(a.data.token);return b.currentUser=e,e}return a}return e}angular.module("app.login").service("loginService",a),a.$inject=["$modal","$rootScope","store","jwtHelper"]}(),function(){"use strict";function a(a,b,c,d,e){function f(){return o.loggedIn()?!0:!1}function g(){return o.loggedIn()&&_.intersection(a.currentUser.roles,o.can_add_project_roles)?!0:!1}function h(){return o.loggedIn()&&_.intersection(a.currentUser.roles,o.can_edit_roles)?!0:!1}function i(b){return o.loggedIn()&&_.contains(a.currentUser.roles,b)?!0:!1}function j(){return Boolean(c.get("jwt"))}function k(){e()}function l(){c.remove("jwt"),delete a.currentUser}function m(){sessionStorage.loginStateService=angular.toJson(o.masterList)}function n(){o.masterList=angular.fromJson(sessionStorage.loginStateService)}var o={can_edit_roles:["Curator","Manager"],can_add_project_roles:["Curator"],canAddComments:f,canAddProjects:g,canEditProjects:h,hasRole:i,loggedIn:j,login:k,logout:l,SaveState:m,RestoreState:n};return o}angular.module("app.login").factory("loginStateService",a),a.$inject=["$rootScope","$http","store","jwtHelper","loginService"]}(),function(){angular.module("app.loginInjectorProvider",[])}(),function(){"use strict";function a(a,b,c){function d(b){if(401!==b.status)return b;var c=a.defer();return e().then(function(){c.resolve(f(b.config))},function(){g.go("select.home"),c.reject(b)}),c.promise}var e,f,g,h={responseError:d};return h}angular.module("app.loginInjectorProvider").factory("loginInjector",a),a.$inject=["$q","$injector","$timeout"]}(),function(){angular.module("app.manage",["ui.router"])}(),function(){"use strict";function a(a){a.state("manage",{url:"/manage",templateUrl:"/static/manage/manage.html",controller:"Manage",controllerAs:"manage",data:{requiresLogin:!0}})}angular.module("app.manage").config(a),a.$inject=["$stateProvider"]}(),function(){"use strict";function a(a){this.currentUser=a.currentUser}angular.module("app.manage").controller("Manage",a),a.$inject=["$rootScope"]}(),function(){angular.module("app.modalConfirm",["ui.bootstrap"])}(),function(){"use strict";function a(a){function b(b,c){var e={},f={};return jQuery.extend(e,d.modalDefaults,b),jQuery.extend(f,d.modalOptions,c),e.controller||(e.controller=["$scope","$modalInstance",function(a,b){a.modalOptions=f,a.modalOptions.ok=function(a){b.close(a)},a.modalOptions.close=function(a){b.dismiss("cancel")}}]),a.open(e).result}function c(a,b){return a||(a={}),a.backdrop="static",d.show(a,b)}var d={modalDefaults:{backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"/static/modalConfirm/confirm.html"},modalOptions:{actionText:"OK",bodyText:"OK to proceed?",closeText:"Close",headerText:"Confirm"},show:b,showModal:c};return d}angular.module("app.modalConfirm").factory("modalConfirmService",a),a.$inject=["$modal"]}(),function(){angular.module("app.project",["ui.date","ui.router"])}(),function(){"use strict";function a(a){a.state("project",{url:"/project",controller:"Project",controllerAs:"project",templateUrl:"/static/project/project.html",data:{requiresLogin:!1,viewUrl:"/static/project/project.html"}}).state("project.add",{url:"/add",templateUrl:"/static/project/templates/description.html",data:{requiresLogin:!0}}).state("project.attach",{url:"/attach",data:{requiresLogin:!0}}).state("project.attach.edit",{url:"/edit/:projectID",controller:["$stateParams",function(a){console.log(a)}],controllerAs:"project",data:{requiresLogin:!0}}).state("project.comment",{url:"/comment",templateUrl:"/static/project/templates/comment.html",data:{requiresLogin:!0},resolve:{projectID:["$stateParams",function(a){return a.projectID}]}}).state("project.comment.add",{url:"/add/:projectID",controller:["$stateParams",function(a){console.log(a,projectID)}],onEnter:["attributesService","projectListService",function(a,b){a.getAllAttributes()?a.updateProjAttrsFromRawItem("comment",[{name:"commentID",value:{id:0}}]):a.updateAllAttributes().then(function(){a.updateProjAttrsFromRawItem("comment",[{name:"commentID",value:{id:0}}])})}]}).state("project.comment.edit",{url:"/edit/:projectID",resolve:{projectID:["$stateParams",function(a){return a.projectID}]},controller:["$stateParams",function(a){console.log(a)}]}).state("project.comment.edit.detail",{url:"/detail/:commentID",controller:["$stateParams","projectID",function(a,b){a.projectID=b,console.log(a,b)}]}).state("project.description",{url:"/description",templateUrl:"/static/project/templates/description.html",data:{requiresLogin:!0}}).state("project.description.edit",{url:"/edit/:projectID",controller:["$stateParams",function(a){console.log(a)}],data:{requiresLogin:!0}}).state("project.detail",{url:"/:projectID",controller:["$stateParams",function(a){console.log(a)}],templateUrl:"/static/project/templates/detail.html",data:{requiresLogin:!1}}).state("project.disposition",{url:"/disposition",templateUrl:"/static/project/templates/disposition.html",data:{requiresLogin:!0}}).state("project.disposition.add",{url:"/add/:projectID",controller:["$stateParams",function(a){console.log(a)}],onEnter:["attributesService",function(a){a.getAllAttributes()?a.updateProjAttrsFromRawItem("disposition",[{name:"disposedInFY",value:{id:0}},{name:"disposedInQ",value:{id:0}}]):a.updateAllAttributes().then(function(){a.updateProjAttrsFromRawItem("disposition",[{name:"disposedInFY",value:{id:0}},{name:"disposedInQ",value:{id:0}}])})}]}).state("project.disposition.edit",{url:"/edit/:projectID",resolve:{projectID:["$stateParams",function(a){return a.projectID}]},controller:["$stateParams",function(a){console.log(a)}]}).state("project.disposition.edit.detail",{url:"/detail/:disposedInFY/:disposedInQ",controller:["$stateParams","projectID",function(a,b){console.log(a)}]}).state("project.portfolio",{url:"/portfolio",templateUrl:"/static/project/templates/portfolio.html",data:{requiresLogin:!0}}).state("project.portfolio.edit",{url:"/edit/:projectID",controller:["$stateParams",function(a){console.log(a)}]}).state("project.projectMan",{url:"/projectMan",templateUrl:"/static/project/templates/projectMan.html",data:{requiresLogin:!0}}).state("project.projectMan.edit",{url:"/edit/:projectID",controller:["$stateParams",function(a){console.log(a)}]})}angular.module("app.project").config(a),a.$inject=["$stateProvider"]}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(d,e,g,h,i){if(c.success="","undefined"!=typeof c.noCheck&&(a.projectForm.$setPristine(!0),delete c.noCheck),a.projectForm.$dirty){d.preventDefault();var j={closeText:"Cancel",actionText:"Continue",headerText:"Unsaved changes",bodyText:"You have unsaved changes. Press Continue to discard your changes and navigate away, or press Cancel to stay on this page."};f.showModal({},j).then(function(d){a.projectForm.$setPristine(!0);var f=g.projectID?g.projectID:i.projectID;c.getProjectData(f,g),b.go(e,g)})}}this.as=e,this.ds=c,this.ls=d,this.log_s=g,this.attributes=e.getAttributes,this.changeMode=c.changeMode,this.currentMode=c.currentMode,this.dateOptions={changeYear:!0,changeMonth:!0},this.error=this.ds.server,this.jumpToAtachFile=c.jumpToAtachFile,this.jumpToAddForm=c.jumpToAddForm,this.masterList=this.ls.getMasterList,this.success=this.ds.success,this.viewUrl=c.viewUrl,a.$on("setProjectFormPristine",function(){a.projectForm.$setPristine(!0)}),a.$on(["$stateChangeStart"],h)}angular.module("app.project").controller("Project",a),a.$inject=["$scope","$state","projectDataService","projectListService","attributesService","modalConfirmService","loginStateService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k){function l(){var a=h.getFormData("description",[]);b.get("getProjectAttributes/0").then(function(b){o(b,a)})}function m(){c.go("select.home")}function n(a){a?c.go(a,{projectID:F.projectID}):c.go("project.detail",{projectID:F.projectID})}function o(a,c){c.csrf_token=a.data.csrf_token,delete c.projectID;var d={method:"POST",url:"/projectCreate",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-CSRFToken":c.csrf_token},data:jQuery.param(c,!0)};b(d).then(function(a){F.setProjectData(a,{projectID:a.data.projectID});var b=j.updateAllProjects(a.data.projectID);return b}).then(function(a){F.jumpToNewProject(a)})}function p(){if("project.detail"==c.current.name)return"view";var a=c.current.name.split(".");return a.shift(),a.shift(),a.join(".")}function q(){var a=c.current.name.split(".");return a.shift(),a.shift()}function r(){return c.current.name.indexOf("edit")>-1?!0:!1}function s(a){var c=e.defer();return parseInt(a.projectID)>-1&&b.get("getProjectAttributes/"+a.projectID).then(function(b){if(F.setProjectData(b,a),"commentID"in a){var d=h.getAttribute("commentID");d.value=a.commentID;var e=[d];h.updateProjAttrsFromRawItem("comment",e)}else if("disposedInFY"in a||"disposedInQ"in a){var f=h.getAttribute("disposedInFY");f.value.id=a.disposedInFY;var g=h.getAttribute("disposedInQ");g.value.id=a.disposedInQ;var e=[f,g];h.updateProjAttrsFromRawItem("disposition",e)}c.resolve(a)}),c.promise}function t(){var a=k.getStateFromLocation();"projectID"in a.params&&a.params.projectID!=F.projectID&&(F.projectID=a.params.projectID,F.getProjectData(a.params),j.setProjectID(F.projectID))}function u(a,b){h.updateProjAttrsFromRawItem(a,b);i.canEditProjects()?c.go("project."+a+".edit",{projectID:c.params.projectID}):c.go("project.detail",{projectID:c.params.projectID})}function v(){var a=e.defer(),b=parseInt(d.projectID),c=j.getProjectID();return j.setProjectID(b),b&&b>-1&&c!=b?F.getProjectData(d):c&&c==b&&"undefined"==typeof F.getProjectAttributes("description")?g(function(){F.getProjectData(d).then(a.resolve())}):!c||c!=b||"undefined"!=typeof h.getAttribute("name")&&""!=h.getAttribute("name").value?a.resolve():g(function(){F.getProjectData(d).then(a.resolve())}),a.promise}function w(){c.go("project.attach",{projectID:F.projectID})}function x(a,b){h.updateProjAttrsFromRawItem(a,b),_.contains(["comment","disposition"],a)&&c.go("project."+a+".edit",{projectID:c.params.projectID}),c.go("project."+a+".add",{projectID:c.params.projectID})}function y(a){j.updateAllProjects(a),c.go("project.description.edit",{projectID:a})}function z(){"undefined"!=typeof sessionStorage.projectDataServiceAttributes&&(F.restoredParams=angular.fromJson(sessionStorage.projectDataServiceAttributes))}function A(d,e){var f=h.getFormData(d,e),g=f.csrf_token;f.lastModifiedBy=a.currentUser.id;var i=(c.params.projectID?c.params.projectID:"",{method:"POST",url:"/projectEdit/"+c.params.projectID+"/"+d,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-CSRFToken":g},data:jQuery.param(f,!0)});b(i).then(function(a){F.setProjectData(a,e),F.noCheck=!0;var b=d;"project"==d&&(b="projectMan"),c.go("project."+b+".edit",{projectID:c.params.projectID,noCheck:!0})})}function B(){var a=k.getStateFromLocation().params;sessionStorage.projectDataServiceAttributes=angular.toJson(a)}function C(b,c){F.projectID=j.getProjectID(),j.setProjectID(b.data.projectID),h.updateProjectAttributes(b,c),F.success=b.data.success,F.error=h.server_error,F.SaveState(),h.SaveState(),a.$broadcast("setProjectFormPristine")}function D(a,b){var d=h.updateProjAttrsFromRawItem(a,b);"comment"==a&&c.go("project.comment.edit.detail",{projectID:F.projectID,commentID:d.commentID}),"disposition"==a&&c.go("project.disposition.edit.detail",{projectID:j.getProjectID(),disposedInFY:d.disposedInFY.id,disposedInQ:d.disposedInQ.id})}function E(){return Boolean(_.contains(projectForm.classList,"ng-pristine")&&F.success)}var F={addProject:l,attributes:h.getAllAttributes,cancelAddProject:m,changeMode:n,createProject:o,currentMode:p,currentSubtab:q,editMode:r,getProjectData:s,getProjectAttributes:h.getProjectAttributes,getProjectDataFromLocation:t,hideDetails:u,initService:v,jumpToAtachFile:w,jumpToAddForm:x,jumpToNewProject:y,printValue:h.printValue,RestoreState:z,saveProject:A,SaveState:B,setProjectData:C,showDetails:D,showEditSuccess:E,stateParams:d,viewUrl:c.current.data?c.current.data.viewUrl:""};return F.RestoreState(),"undefined"==typeof F.getProjectAttributes()&&F.restoredParams&&F.getProjectData(F.restoredParams),a.$on("savestate",F.SaveState),a.$on("restorestate",F.RestoreState),a.$on("$locationChangeSuccess",function(){"project"==_.first(c.current.name.split("."))&&(j.hasProjects()?F.initService():j.updateAllProjects().then(F.initService))}),F.SaveState(),F}angular.module("app.project").factory("projectDataService",a),a.$inject=["$rootScope","$http","$state","$stateParams","$q","$location","$timeout","attributesService","loginStateService","projectListService","stateLocationService"]}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){return F.getMasterList().allProjects.length}function h(){return _.map(F.masterList.allProjects,function(a){return a.projectID})}function i(){return F.masterList}function j(){return F.masterList.next}function k(){return F.masterList.previous}function l(){return F.masterList.projectID}function m(){return F.masterList.selectedIds}function n(){return F.masterList.selectedProjects}function o(){return F.masterList.sql}function p(){return-1!=F.masterList.next}function q(){return-1!=F.masterList.previous}function r(){return Boolean(F.allProjectsCount()>0)}function s(){F.masterList={allProjects:[],description:"none",index:-1,next:-1,previous:-1,projectID:-1,projectName:"",selectedIds:[],selectedProjects:[],sql:""}}function t(a){a=parseInt(a);F.masterList.selectedIds.indexOf(a);if(F.masterList.selectedIds.indexOf(a)>-1)return void F.jumpToProjectInList(a,F.masterList.selectedIds);var b=F.getIDListFromAllProjects();return b.indexOf(a)>-1?void F.jumpToProjectInList(a,b):void alert("Can't find a project to display.")}function u(a){F.setProjectID(a),c.go("project.detail",{projectID:a})}function v(){F.updateAllProjects(F.getProjectID()).then(function(a){F.setDescription("none"),F.setSql(""),F.masterList.selectedProjects=F.masterList.allProjects,
F.masterList.selectedIds=_.map(F.masterList.allProjects,function(a){return a.projectID})})}function w(){"undefined"!=typeof sessionStorage.projectListService&&(F.masterList=angular.fromJson(sessionStorage.projectListService))}function x(){sessionStorage.projectListService=angular.toJson(F.masterList)}function y(){return F.masterList.selectedIds.length}function z(a,b){if(F.masterList.allProjects=a.data.descriptions,"undefined"==typeof b||0>b)if("undefined"!=typeof F.masterList.selectIds&&F.masterList.selectIds.length)b=F.masterList.selectIds[0],C(b);else{var c=F.getIDListFromAllProjects();C(c[0],c)}}function A(a){F.masterList.description=a}function B(a){if(F.masterList.selectedIds=a,"undefined"==typeof a);var b=a.indexOf(F.masterList.projectID);if(0>b){var c=a[0];F.setProjectID(c,a)}F.masterList.selectedProjects=_.filter(F.masterList.allProjects,function(a){return _.contains(F.masterList.selectedIds,a.projectID)})}function C(a,b){if(a){a=parseInt(a),F.masterList.projectID=a;var c=F.masterList.selectedIds.indexOf(a);a>0&&-1==c&&F.updateAllProjects(a).then(function(a){"undefined"!=typeof b&&(F.masterList.selectedIds=b),c=F.masterList.selectedIds.indexOf(a)}),c>-1&&(F.masterList.index=c,c>0?F.masterList.previous=F.masterList.selectedIds[c-1]:F.masterList.previous=-1,c<F.masterList.selectedIds.length?F.masterList.next=F.masterList.selectedIds[c+1]:F.masterList.next=-1),_.each(F.masterList.allProjects,function(b){b.projectID==a&&(F.masterList.projectName=b.name)}),F.masterList.selectedProjects=_.filter(F.masterList.allProjects,function(a){return _.contains(F.masterList.selectedIds,a.projectID)})}F.SaveState()}function D(a){F.masterList.sql=a}function E(a){var c=f.defer();return b.post("/getBriefDescriptions").then(function(b){F.setAllProjectResults(b,a),c.resolve(a)}),c.promise}var F={allProjectsCount:g,getIDListFromAllProjects:h,getMasterList:i,getNextID:j,getPreviousID:k,getProjectID:l,getSelectedIds:m,getSelectedProjects:n,getSql:o,hasNextID:p,hasPreviousID:q,hasProjects:r,initModel:s,jumpToProject:t,jumpToProjectInList:u,resetList:v,RestoreState:w,SaveState:x,selectedIdsCount:y,setAllProjectResults:z,setDescription:A,setList:B,setProjectID:C,setSql:D,updateAllProjects:E};return F.RestoreState(),"undefined"==typeof F.masterList&&F.initModel(),a.$on("savestate",F.SaveState),a.$on("restorestate",F.RestoreState),F}angular.module("app.project").factory("projectListService",a),a.$inject=["$rootScope","$http","$state","$stateParams","$location","$q"]}(),function(){function a(){return{restrict:"EA",templateUrl:"/static/project/templates/subHeadings.html"}}angular.module("app.project").directive("projectSubHeadings",a)}(),function(){angular.module("app.report",["ui.router","datatables","datatables.bootstrap"])}(),function(){"use strict";function a(a){a.state("report",{url:"/report",controller:"Report",controllerAs:"report",templateUrl:"/static/report/report.html",data:{requiresLogin:!1}}).state("report.columns",{url:"/columns/:query_string",templateUrl:"/static/report/templates/columns.html",controller:["$stateParams",function(a){console.log(a)}]}).state("report.table",{url:"/:query_string",templateUrl:"/static/report/templates/table.html",controller:["$stateParams",function(a){console.log(a)}]})}angular.module("app.report").config(a),a.$inject=["$stateProvider"]}(),function(){"use strict";function a(a,b,c,d){this.ls=c,this.masterList=this.ls.getMasterList,this.jumpToProject=this.ls.jumpToProject,this.ts=d,this.state=a}angular.module("app.report").controller("Report",a),a.$inject=["$state","$stateParams","projectListService","reportTableService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k){function l(b,c,d){a(angular.element(b).contents())(w.scope)}function m(a){var c={method:"POST",url:"/getReportResults",data:{query_string:encodeURIComponent(a),tableColumns:w.tableColumns()}};b(c).then(w.setReportResults)}function n(){var a={method:"POST",url:"/getReportTableJSON",data:{projectID:j.getSelectedIds(),tableColumns:w.tableColumns()}};b(a).then(w.setReportTableData)}function o(){var a=k.getStateFromLocation(),b=a.params.query_string,c=j.getSql();"undefined"==typeof b?w.getReportResults(c):b&&b!=c?w.getReportResults(b):""==b&&w.dataTableRowCount()!=j.allProjectsCount()?w.getReportResults(b):0==w.dataTableRowCount()&&w.getReportTableData()}function p(a,b,c,d){return'<a ui-sref="project.detail({projectID: '+a+'})">'+a+"</a>"}function q(){try{return w.master.dtOptions.data.length}catch(a){return 0}}function r(){if("undefined"!=typeof sessionStorage.reportTableService){var a=angular.fromJson(sessionStorage.reportTableService);w.master.dtColumns=a.dtColumns,w.master.dtColumns[0]=w.projectIDColumn,w.master.dtOptions=a.dtOptions,w.master.dtOptions.createdRow=w.createdRow}}function s(){sessionStorage.reportTableService=angular.toJson(w.master)}function t(a){j.setList(a.data.response.projectList),j.setDescription(a.data.response.query_desc),j.setSql(a.data.response.query_string),j.SaveState(),u(a),w.SaveState()}function u(a){w.master.dtOptions=i.newOptions().withBootstrap(),w.master.dtOptions.withOption("data",[]),_.each(Object.keys(a.data.response.options),function(b){w.master.dtOptions.withOption(b,a.data.response.options[b])}),w.master.dtOptions.withOption("createdRow",l),w.master.dtColumns=[w.projectIDColumn].concat(a.data.response.columns),w.master.dtOptions.data=a.data.response.data,w.SaveState()}function v(){return _.pluck(w.master.dtColumns,"data")}var w={createdRow:l,dataTableRowCount:q,getReportResults:m,getReportTableData:n,initService:o,projectIDColumn:{data:"projectID",title:"ID",render:p,defaultContent:""},RestoreState:r,SaveState:s,scope:d.$new(),setReportResults:t,setReportTableData:u,tableColumns:v,title:"View Project List as Table",master:{dtColumns:[{data:"projectID",title:"ID",render:p,defaultContent:""},{data:"name",title:"Name"},{data:"abstract",title:"Abstract"},{data:"maturity",title:"Maturity"},{data:"drivers",title:"Drivers"},{data:"disposition",title:"Disposition"},{data:"flavor",title:"Portfolio catagory"},{data:"startedOn",title:"Started"},{data:"bogus",title:"Bogus"}],dtInstance:{},dtOptions:{destroy:!0,lengthChange:!1,pageLength:25,paging:!1,pagingType:"full_numbers",saveState:!0,searching:!1,serverSide:!1}}};return w.RestoreState(),d.$on("savestate",w.SaveState),d.$on("restorestate",w.RestoreState),d.$on("$locationChangeSuccess",function(){"report"==_.first(e.current.name.split("."))&&(j.hasProjects()?w.initService():j.updateAllProjects().then(w.initService))}),w}angular.module("app.report").factory("reportTableService",a),a.$inject=["$compile","$http","$location","$rootScope","$state","$stateParams","DTColumnBuilder","DTInstances","DTOptionsBuilder","projectListService","stateLocationService"]}(),function(){"use strict";function a(){function a(){}return{bindToController:!0,controller:a,controllerAs:"ctrl",link:function(a,b,c,d){console.log("reportTableSubHeadings")},scope:{report:"="},templateUrl:"static/report/templates/subHeadings.html"}}angular.module("app.report").directive("reportTableSubHeadings",a)}(),function(){angular.module("app.select",["ui.router","readMore"])}(),function(){"use strict";function a(a){a.state("select",{url:"/select",controller:"Select",controllerAs:"select",templateUrl:"/static/select/select.html",data:{requiresLogin:!1},onEnter:["selectStateService",function(a){a.initService()}]}).state("select.home",{url:"/home",templateUrl:"/static/select/templates/home.html"}).state("select.addProject",{url:"/addProject",templateUrl:"/static/select/templates/addProject.html",data:{requiresLogin:!0},onEnter:["attributesService","projectDataService",function(a,b){a.getAllAttributes()?b.getProjectData({projectID:0}):a.updateAllAttributes().then(b.getProjectData({projectID:0}))}]})}angular.module("app.select").config(a),a.$inject=["$stateProvider"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(c,d,g,h,i){if(f.success="","state.addProject"==h.name&&a.addProject.$dirty){c.preventDefault();var j={closeText:"Cancel",actionText:"Continue",headerText:"Unsaved changes",bodyText:"You have unsaved changes. Press Continue to discard your changes and navigate away, or press Cancel to stay on this page."};e.showModal({},j).then(function(c){a.addProject.$setPristine(),b.go(d,g)})}}this.state=b,this.as=c,this.ds=f,this.logss=d,this.ls=g,this.masterList=this.ls.getMasterList,this.jumpToProject=this.ls.jumpToProject,this.ss=h,this.selectState=h.getMasterList,a.$on("$stateChangeStart",i)}angular.module("app.select").controller("Select",a),a.$inject=["$scope","$state","attributesService","loginStateService","modalConfirmService","projectDataService","projectListService","selectStateService"]}(),function(){"use strict";function a(a){return function(b,c,d,e){if(!c)return b;var f=(b.length||0,(c||"").toLowerCase()),g=f.split(" "),h=_.map(g,function(a){return"'"+a+"'"}),i=b,j=[],k=[];if("0"==e&&(i=_.filter(i,function(a){return"0"==a.finalID}),j.push("final state='still alive'"),k.push("final=0")),"phrase"==d)i=_.filter(i,function(a){return(a.name+" "+a["abstract"]).toLowerCase().match(f)}),j.push("name or abstract contains '"+c+"'"),k.push("name_abs="+c),k.push("name_absLogic=phrase");else if("and"==d)_.map(g,function(a){i=_.filter(i,function(a){return(a.name+" "+a["abstract"]).toLowerCase().match(this)},a)}),j.push(" or abstract contains "+h.join(" and ")),k.push("name_abs="+c),k.push("name_absLogic=and");else if("or"==d){var l,m=[];_.map(g,function(a){l=_.filter(i,function(a){return(a.name+" "+a["abstract"]).toLowerCase().match(this)},a),m=_.union(l,m)}),i=_.intersection(i,m),j.push("name or abstract contains "+h.join(" or ")),k.push("name_abs="+c),k.push("name_absLogic=or")}var n=_.map(i,function(a){return a.projectID});return a.setList(n),a.setDescription(j.join(", ")),a.setSql(k.join("&")),i}}angular.module("app.select").filter("nameSearch",a),a.$inject=["projectListService"]}(),function(){"use strict";function a(a,b,c,d,e){function f(){t.masterList.breakdownAttr="",d.resetList()}function g(){t.masterList.searchText="",d.resetList()}function h(){return t.breakdownByAttribute}function i(){return t.breakdownChoicesList}function j(){var a=0;return _.each(t.breakdownByAttribute,function(b){a+=b.projectList.length}),a}function k(){return t.masterList}function l(){d.resetList()}function m(a){c.go("report.table",{query_string:a.query_string})}function n(){"undefined"!=typeof sessionStorage.selectStateService&&(t.masterList=angular.fromJson(sessionStorage.selectStateService))}function o(){sessionStorage.selectStateService=angular.toJson(t.masterList)}function p(a){t.breakdownByAttribute=a.data.breakdown}function q(a){t.breakdownChoicesList=a.data.choices,t.SaveState()}function r(){b.get("getBreakdownByAttribute/"+t.masterList.breakdownAttr.id).then(p)}function s(){b.get("getBreakdownChoices").then(q)}var t={masterList:{searchText:"",name_absLogic:"or",finalID:"0",breakdownAttr:null},clearBreakdown:f,clearSearchText:g,getBreakdownByAttribute:h,getBreakdownChoices:i,getBreakdownTotal:j,getMasterList:k,initService:l,jumpToBreakdownTable:m,setBreakdownChoices:q,updateBreakdownByAttribute:r,updateBreakdownChoices:s,SaveState:o,RestoreState:n};return n(),"undefined"==typeof t.breakdownChoicesList&&t.updateBreakdownChoices(),a.$on("savestate, service.SaveState"),a.$on("restorestate, service.RestoreState"),o(),t}angular.module("app.select").factory("selectStateService",a),a.$inject=["$rootScope","$http","$state","projectListService","reportTableService"]}(),function(){"use strict";function a(){return{restrict:"EA",templateUrl:"/static/select/templates/subHeadings.html"}}angular.module("app.select").directive("selectSubHeadings",a)}(),function(){angular.module("app.stateLocation",["ui.router"])}(),function(){"use strict";function a(){function a(a,b){var c=void 0===b?null:JSON.stringify(b);return sessionStorage.setItem(a,c)}function b(a){return JSON.parse(sessionStorage.getItem(a))}function c(){var a=[];for(key in sessionStorage)a.push(f.setStorage(key,null));return a}function d(a){return null==a&&(a=null),f.accessor("stateHistory",a)}function e(a,b){return null==b?f.getStorage(a):f.setStorage(a,b)}var f={setStorage:a,getStorage:b,clear:c,stateHistory:d,accessor:e};return f}angular.module("app.stateLocation").factory("sessionService",a)}(),function(){"use strict";function a(a){function b(b,c){var d=a.stateHistory(),e=null!=d?d:{};return e[b]=c,a.stateHistory(e)}function c(b){var c=a.stateHistory();return null!=c?c[b]:void 0}var d={set:b,get:c};return d}angular.module("app.stateLocation").factory("stateHistoryService",a),a.$inject=["sessionService"]}(),function(){"use strict";function a(a,b,c){a.$on("$stateChangeSuccess",function(a,b,d){c.stateChange()}),a.$on("$locationChangeSuccess",function(){c.locationChange()})}angular.module("app.stateLocation").run(a),a.$inject=["$rootScope","$state","stateLocationService"]}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){return angular.fromJson(sessionStorage.currentState)}function h(){var a=p.preventCall.pop();if("locationChange"!=a){"undefined"!=typeof a&&p.preventCall.push(a);var d=b.url(),f=e.get(d);null!=f&&(p.preventCall.push("stateChange"),c.go(f.name,f.params,{location:!1}))}}function i(){var a=new Object;a.params=new Object;var c=b.path().split("/").reverse();c.pop();var d=c.pop();if("project"==d){"comment"==_.last(c)&&"detail"==c[1]?(a.name="project.comment.edit.detail",a.params.commentID=parseInt(c[0]),a.params.projectID=parseInt(c[2])):"disposition"==_.last(c)&&"detail"==c[2]?(a.name="project.disposition.edit.detail",a.params.projectID=parseInt(c[3]),a.params.disposedInFY=parseInt(c[1]),a.params.disposedInQ=parseInt(c[0])):1==c.length?(a.name="project.detail",a.params.projectID=parseInt(c[0])):(a.name=["project",c[2],c[1]].join("."),a.params.projectID=parseInt(c[0]))}else"filter"==d?"attributes"==c[1]?(a.name="filter.builder.attributes",a.params.query_string=c[2],a.params.attribute_list=c[0]):(a.name="filter.builder",a.params.query_string=c[0]):"report"==d?"columns"==c[1]?(a.name="report.columns",a.params.query_string=c[0]):(a.name="report.table",a.params.query_string=c[0]):a.name=[d].concat(c).join(".");return a}function j(){var a=p.preventCall.pop();if("stateChange"!=a&&("undefined"!=typeof a&&p.preventCall.push(a),c.current.name)){var f=k(),g={name:c.current.name,params:d};e.set(f,g),p.preventCall.push("locationChange"),b.url(f)}}function k(){var a=c.href(c.current,c.params);"#"==a[0]&&(a=a.substring(1));var d=p.guid().substr(0,8),e=_.first(c.current.name.split("."));return"project"==e?a=b.hash(d):"report"==e&&(a=b.hash(d)),"object"==typeof a?a.url():"string"==typeof a?a:void 0}function l(){if(c.current.name){var a={name:c.current.name,params:c.params};sessionStorage.currentState=angular.toJson(a)}}function m(){if(c.current.name){var a={name:c.current.name,params:c.params},d=b.url();e.set(d,a)}}function n(){return""+p.s4()+p.s4()+"-"+p.s4()+"-"+p.s4()+"-"+p.s4()+"-"+p.s4()+p.s4()+p.s4()}function o(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var p={preventCall:[],locationChange:h,getCurrentState:g,getStateFromLocation:i,saveState:m,stateChange:j,saveCurrentState:l,guid:n,s4:o};return window.onbeforeunload=function(b){a.$broadcast("savestate")},p}angular.module("app.stateLocation").factory("stateLocationService",a),a.$inject=["$rootScope","$location","$state","$stateParams","stateHistoryService","projectListService"]}(),function(){angular.module("app.title",["ui.router"])}(),function(){"use strict";function a(a,b,c,d){var e=this;this.masterList=c.getMasterList,this.pageTitle="PPT: Select",a.$on("$locationChangeSuccess",function(a,b){var c=d.getStateFromLocation(),f=_.first(c.name.split("."));"select"==f?e.pageTitle="PPT: Select":"filter"==f?e.pageTitle="PPT: Filter Builder":"report"==f?e.pageTitle="PPT: Report":"project"==f?e.pageTitle=c.params.projectID+". "+e.masterList().projectName:"comment"==f?e.pageTitle="PPT: Comments":"curate"==f?e.pageTitle="PPT: Curate":"manage"==f?e.pageTitle="PPT: Manage":e.pageTitle="PPT: Select"})}angular.module("app.title").controller("Title",a),a.$inject=["$rootScope","$state","projectListService","stateLocationService"]}();